{% load static %}

{% block content %}

    <div class="container pt-4">
        <div class"row">
            <div class="col-2">
                <img src="{% static "images/gfbio_logo.png" %}" alt="GFBio logo" height="100" class="float-right"/>
            </div>
            <div class="col-10">
                <h2>Data Management Plan of: <em>{{ project.title }}</em></h2>
            </div>
        </div>

        <div class="row">
            <div class="col-12">
                {% load view_tags %}

                {% for section in project.catalog.sections.all %}

                    <h2>{{ section.title }}</h2>

                    {% for questionset in section.questionsets.all %}

                        <h3>{{ questionset.title }}</h3>

                        {% for question in questionset.questions.all %}

                            <p><strong>{{ question.text }}</strong></p>

                            {% if questionset.is_collection %}

                                {% get_set questionset.attribute.uri project=project_wrapper as sets  %}
                                {% for set in sets %}
                                    {% if question.is_collection %}
                                        <p><em>{{ set.value }}:</em></p>
                                        <ul>
                                            {% render_set_value_list set question.attribute.uri project=project_wrapper %}
                                        </ul>
                                    {% else %}
                                        <p><em>{{ set.value }}:</em> {% render_set_value set question.attribute.uri project=project_wrapper %}</p>
                                    {% endif%}
                                {% endfor %}

                            {% else %}

                                {% if question.is_collection %}
                                    <ul>
                                        {% render_value_list question.attribute.uri project=project_wrapper %}
                                    </ul>
                                {% else %}
                                    <p>
                                        {% render_value question.attribute.uri project=project_wrapper  %}
                                    </p>
                                {% endif%}

                            {% endif %}

                        {% endfor %}

                    {% endfor %}
                {% endfor %}
            </div>
        </div>
    </div>
{% endblock %}
